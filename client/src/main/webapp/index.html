<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esprit Carbone</title>

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <script type="application/javascript" src="js/spa.js" defer></script>

    <script crossorigin="anonymous" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script crossorigin="anonymous" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
    <script crossorigin="anonymous" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"></script>
    <script type="application/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>


</head>

<body>
    <!-- Navbar start -->
    <div class="container-fluid bg-primary fixed-top">
        <nav class="navbar navbar-light bg-primary navbar-expand-xl">
            <a href='#' id="accueil1" class="navbar-brand px-5">
                <h1 class="display-6 text-white">Esprit Carbone</h1>
            </a>
            <button class="navbar-toggler py-2 px-3" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarCollapse"><span class="fa fa-bars text-primary"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav mx-auto">
                    <li class="notRequiresConnection">
                        <a href="#" id="accueil2" class="nav-item nav-link text-white">Accueil</a>
                    </li>
                    <li class="notRequiresConnection">
                        <a href="#" id="produits" class="nav-item nav-link text-white">Produits</a>
                    </li>
                    <li class="requiresConnection">
                        <a href="#" id="compte" class="nav-item nav-link text-white">Mon compte</a>
                    </li>
                    <li class="requiresConnection">
                        <a href="#" id="empreinte" class="nav-item nav-link text-white">Mes empreintes</a>
                    </li>
                </div>
            </div>
            <div class="d-flex justify-content-center align-items-center m-3 me-3">
                <a class="notRequiresConnection d-flex m-2 px-2 py-2 bg-light rounded-pill" href="#">
                    <span id="connexion1" class="text-primary">Connexion</span>
                </a>
                <a class="requiresConnection d-flex m-2 px-2 py-2 bg-light rounded-pill" href="#">
                    <span id="deco" class="text-primary" onclick=deco()>Se déconnecter</span>
                </a>
            </div>

        </nav>
    </div>
    <!-- Navbar End -->

    <!-- Index Start -->
    <section id='sectionAccueil' class='active'>
        <!-- Hero Start -->
        <div class="container-fluid py-5 mb-5 hero-header">
            <div class="justify-content-center container py-5">
                <div class="align-items-center text-center">
                    <h1 class="mb-5 display-3 text-primary">Connaissez-vous votre empreinte carbone ?</h1>
                    <div class="mx-auto">
                        <button type="submit"
                            class="btn btn-primary border-2 border-secondary py-3 px-4 rounded-pill text-white h-100"
                            style="top: 0; right: 25%;">Faire le test</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Hero End -->

        <div class="center-container"> <!-- Ajout d'une classe pour le conteneur central -->
            <div class="justify-content-center container px-0">
                <div class="align-items-center position-relative mx-auto">
                    <p style="text-align: justify">
                        Chaque bouchée que nous prenons a un impact profond sur notre planète. L'alimentation est bien
                        plus qu'une simple nécessité pour nourrir notre corps. C'est également l'un des principaux
                        contributeurs aux émissions de dioxyde de carbone responsables du changement climatique. De la
                        production agricole aux processus de transformation, du transport à la distribution, chaque
                        étape de la chaîne alimentaire génère des émissions de CO2.
                    </p>
                    <p style="text-align: justify">
                        En moyenne, l'alimentation représente environ 25% des émissions de CO2 d'une personne, soit
                        environ 2 000 gCO2 par jour par personne. Cependant, ces chiffres peuvent varier
                        considérablement en fonction des choix alimentaires individuels. Par exemple, la consommation de
                        viande rouge et de produits laitiers, souvent associée à des méthodes intensives d'élevage et de
                        production de nourriture pour le bétail, peut contribuer de manière disproportionnée aux
                        émissions de CO2. En revanche, une alimentation à base de plantes, avec une forte proportion de
                        fruits, de légumes, de céréales complètes et de légumineuses, est généralement associée à des
                        émissions de CO2 plus faibles.
                    </p>
                    <p style="text-align: justify">
                        Afin de mieux comprendre l'impact de votre consommation alimentaire, nous avons développé une
                        application où vous pouvez enregistrer tous les aliments que vous consommez. Avec une base de
                        données comprenant plus de <strong id="nbProduits"></strong> produits, vous pourrez ainsi suivre
                        votre consommation quotidienne et visualiser son impact sur l'environnement.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <!-- Index End -->

    <!-- Page de produits start -->
    <section id='sectionProduits' class='inactive'>
        <!-- TODO a remplacer par un template mustach ? -->
        <div class="container-fluid py-3 mb-5" style="margin-top: 150px;">
            <div class="justify-content-center container px-0">
                <div class="align-items-center position-relative mx-auto">
                    <input id="recherche" class="form-control border-2 border-secondary w-100 py-3 px-4 rounded-pill"
                        type="text" placeholder="Rechercher...">
                    <button type="submit"
                        class="btn btn-primary border-2 border-secondary py-3 px-4 position-absolute rounded-pill text-white h-100"
                        style="top: 0; right: 0%;">Rechercher
                    </button>
                </div>
            </div>
        </div>
        <script id="list_aliments_template" type="x-tmpl-mustache">
            {{#aliments}}
                <div class="col-md-6 col-lg-4 col-xl-3">
                    <div class="rounded position-relative fruite-item">
                        <div class="idProduit"style="display: none;">{{alimentId}}</div>
                        <div class="text-white bg-secondary px-3 py-1 rounded position-absolute"
                            style="top: 10px; left: 10px;">{{sousGroupe}}
                        </div>
                        <div class="p-4 border border-secondary rounded-bottom">
                            <h4 style="margin-top: 25px;" class="nom_legume">{{nomLegume}}</h4>
                            <div class="d-flex justify-content-between flex-lg-wrap">
                                <p class="text-dark fs-6 fw-bold mb-2 ec">{{ec}} gC02 / kg</p>
                                <input type="number" class="quantity requiresConnection" name="quantity" min="0" step="0.1" placeholder="Quantité en kg" required> <br>
                                <input class="date requiresConnection" type="date"></input>
                                <a href="#" class="btn border border-secondary rounded-pill px-3 text-primary requiresConnection" onclick="addProduct(this)">
                                    <i class="fa fa-shopping-bag me-2 text-primary"></i> Ajouter à ma liste
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            {{/aliments}}

        </script>
        <div class="container px-0 py-3">
            <div id="tab-1" class="tab-pane fade show p-0">
                <div class="row g-4">
                    <div class="col-lg-12">
                        <div id="listAliments" class="row g-3">

                        </div>
                    </div>
                </div>
                <button id="btnrecherche"
                    class="btn btn-primary border-2 border-secondary py-2 px-3 m-2 rounded-pill text-white h-100"
                    style="top: 0; right: 0%;" role="button">Voir plus</button>
            </div>
        </div>
    </section>
    <!-- Page de produits End -->

    <!-- Page de connexion Start -->
    <section id='sectionConnexion' class='ma-section inactive'>
        <div class="container-fluid contact py-5 mb-5">
            <div class="container py-5 mb-5">
                <div class="p-5">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-3">
                                <!-- Utilisation de col-4 pour que la div occupe 20% de la largeur de l'écran (20% de 12 colonnes) -->
                                <div class="rounded bg-dark text-center p-2 mt-n3 child2">
                                    <h3 class="display-7 text-light">Me connecter</h3>
                                </div>
                            </div>
                            <div class="rounded bg-light p-4 mt-4 child1">
                                <div class="row justify-content-center">
                                    <div class="col-4 pt-3">
                                        <form id="loginForm">
                                            <div class="container py-5 mb-5">
                                                <div class="form-input p-2">
                                                    <i class="fa fa-user fa-2x" aria-hidden="true"></i>
                                                    <input type="text" id="login" placeholder="Login" required />
                                                </div>
                                                <div class="form-input p-2">
                                                    <i class="fa fa-lock fa-2x" aria-hidden="true"></i>
                                                    <input type="password" id="password" placeholder="Mot de passe"
                                                        required />
                                                </div>
                                                <div class="row justify-content-center py-4">
                                                    <div class=" col-8 mx-auto">
                                                        <button type="button"
                                                            class="btn btn-primary border-2 border-secondary py-1 px-4 rounded-pill text-white h-100"
                                                            style="top: 0; right: 25%;" onclick="connect()">Je me
                                                            connecte</button>
                                                    </div>
                                                    <div class="pt-2 ps-1">
                                                        <p>pas encore inscrit? <a href="#" id="inscription">Créer mon
                                                                compte</a></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Page de connexion End -->

    <!-- Page d'inscription Start -->
    <section id='sectionInscription' class='ma-section1 inactive'>
        <div class="container-fluid contact py-5 mb-5">
            <div class="container py-5 mb-5">
                <div class="p-5">
                    <div class="container">
                        <div class="row justify-content-center">
                            <div class="col-3">
                                <!-- Utilisation de col-4 pour que la div occupe 20% de la largeur de l'écran (20% de 12 colonnes) -->
                                <div class="rounded bg-dark text-center p-2 mt-n3 child2">
                                    <h3 class="display-7 text-light">Créer mon compte</h3>
                                </div>
                            </div>
                            <div class="rounded bg-light p-4 mt-4 child1">
                                <div class="row justify-content-center">
                                    <div class="col-4 pt-3">
                                        <form id="formCreateUser">
                                            <div class="container py-5 mb-5">
                                                <div class="form-input p-2 ps-5">
                                                    <i class="fa fa-sign-in fa-2x" aria-hidden="true"></i>
                                                    <input type="text" id="inputLogin" placeholder="Login" required />
                                                </div>
                                                <div class="form-input p-2 ps-5">
                                                    <i class="fa fa-user fa-2x" aria-hidden="true"></i>
                                                    <input type="text" id="inputName" placeholder="Nom" required />
                                                </div>
                                                <div class="form-input p-2 ps-5">
                                                    <i class="fa fa-lock fa-2x" aria-hidden="true"></i>
                                                    <input type="password" id="inputPassword" placeholder="Mot de passe"
                                                        required />
                                                </div>
                                                <div class="row justify-content-center py-4 ps-4">
                                                    <div class=" col-8 mx-auto">
                                                        <button type="button"
                                                            class="btn btn-primary border-2 border-secondary py-1 px-4 rounded-pill text-white h-100"
                                                            style="top: 0; right: 25%;" onclick="register()">Je crée mon
                                                            compte</button>
                                                    </div>
                                                    <div class="pt-2 text-center">
                                                        <p>déjà utilisateur ? <a href="#" id="connexion2">Me
                                                                connecter</a></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Page d'inscription End -->

    <!-- Page du compte de l'utilisateur Start -->
    <section id='sectionCompte' class='inactive'>
        <div class="container-fluid py-5 mb-5">
            <div class="py-5 px-5">
                <div class="row g-4 py-5">
                    <div class="col-lg-3">
                        <div class="p-4 border border-secondary rounded-bottom row g-4">
                            <div class="col-12 mt-4">
                                <div class="mb-3 border-bottom">
                                    <h4>
                                        <a href="#" id="compte2" class="text-dark">Mon compte</a>
                                    </h4>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="mb-3 border-bottom">
                                    <h4>
                                        <a href="#" id="liste_produits" class="text-dark"
                                            onclick="renderListAlimentUser()">Ma liste</a>
                                    </h4>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-9 px-5">
                        <div id="secCompte2" class="active">
                            <div class="px-5" style="max-width: 600px; ">
                                <div class="text-center bg-secondary p-2 mt-n4 mb-3 rounded">
                                    <h1 class="text-white"> Mes informations </h1>
                                </div>
                                <script id="info-user-Template" type="text/template">
                                    <form>
                                        <div class="form-group p-1" >
                                            <label for="loginCompte">Login</label>
                                            <input type="text" class="form-control" id="loginCompte" value="{{username}}" readonly>
                                        </div>
                                        <div class="form-group p-1" >
                                            <label for="name_update">Nom</label>
                                            <input type="text" class="form-control" id="name_update_input"  value="{{ name }}">
                                        </div>
                                        <div class="form-group p-1">
                                            <label for="new_password1">Nouveau mot de passe</label>
                                            <input type="password" class="form-control" id="new_password1">
                                        </div>
                                        <div class="form-group p-1">
                                            <label for="new_password2">Confirmation mot de passe</label>
                                            <input type="password" class="form-control" id="new_password2">
                                        </div>
                                        <button type="button" class="btn btn-primary border-2 border-secondary py-2 px-3 rounded-pill text-white h-100"
                                                style="margin: 10px 0px;" onclick="updateUser()">Modifier</button>
                                        
                                    </form>
                                </script>
                                <div class="info py-3" id="monCompte">

                                </div>
                                <div class="info py-5">
                                    <button
                                        class="btn btn-danger border-secondary pt-2 px-3 rounded-pill text-white h-100"
                                        href="#" role="button" id="deleteAccount">Supprimer mon compte</button>
                                </div>
                            </div>
                        </div>
                        <div id='secDelete' class='inactive'>
                            <h2>Supression du compte</h2>
                            <p>Si vous êtes sûre de vouloir supprimer votre compte, cliquez ici :
                                <button type="button" class="btn btn-danger" onclick="deleteAccount()">Supprimer
                                    définitivement</button>
                            </p>
                        </div>
                        <div id="secListe" class="inactive">
                            <div class="p-5">
                                <div class="mb-5">
                                    <div class="text-center bg-secondary p-1 mt-n5 rounded">
                                        <h1 class="text-white">Ma liste</h1>
                                    </div>
                                </div>
                                <script id="list_produit" type="x-tmpl-mustache">
                                    {{#produits}}
                                        <div class="col-md-6 col-lg-4 col-xl-3">
                                            <div class="rounded position-relative fruite-item">
                                                {{#1}}
                                                    <div class="text-white bg-secondary px-3 py-1 rounded position-absolute"
                                                        style="top: 10px; left: 10px;">{{sousGroupe}}
                                                    </div>
                                                {{/1}}
                                                <div class="p-4 border border-secondary rounded-bottom">
                                                    {{#1}}
                                                        <h4 style="margin-top: 25px;">{{nomLegume}}</h4>
                                                    {{/1}}
                                                    <div class="d-flex justify-content-between flex-lg-wrap">
                                                        <p class="text-dark fs-6 fw-bold mb-2">{{2}} gC02 / kg</p>
                                                        <p>{{3}}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {{/produits}}
                                </script>
                                <div id="listProduits" class="row g-3">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>
    <!-- Page de compte de l'utilisateur End -->

    <!-- Page pour les empreintes precedentes Start -->
    <script>
        $(function () {
            for (let i = 2024; i >= 2000; i--) {
                $("#annee").append(`<option value="${i}">${i}</option>`);
            }
            for (let i = 1; i < 32; i++) {
                $("#slcjour").append(`<option value="${i}">${i}</option>`);
            }
        });
    </script>
    <section id='sectionEmpreinte' class='inactive'>
        <div class="container-fluid py-3 mb-5" style="margin-top: 150px;">
            <div class="justify-content-center container px-0">
                <div class="align-items-center position-relative mx-auto">
                    <div class="text-center p-2 mt-n5">
                        <h1 class="mb-5 display-3 text-dark">Mes empreintes carbones précédentes</h1>
                    </div>

                    <div class="m-4 p-4 right-0">
                        <div class="mb-3 border-bottom">
                            <h4>
                                <a href="#" id="" class="text-dark">Votre empreinte carbone total est <strong
                                        id="consoTotal">...</strong> gCO2</a>
                            </h4>
                        </div>
                    </div>

                    <div class="m-4">
                        <div class="rounded bg-primary p-5">
                            <div class="row"> <!-- Wrap all dropdowns inside this row -->
                                <div class="col-4"> <!-- Each dropdown takes 4 columns -->
                                    <div class="nav-item dropdown" id="date">
                                        <select class="form-select form-select-lg mb-3" aria-label=".form-select-sm"
                                            id="slcjour">
                                        </select>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="nav-item dropdown" id="div_mois">
                                        <select class="form-select form-select-lg mb-2" aria-label=".form-select-sm">
                                            <option value="1">Janvier</option>
                                            <option value="2">Fevrier</option>
                                            <option value="3">Mars</option>
                                            <option value="4">Avril</option>
                                            <option value="5">Mai</option>
                                            <option value="6">Juin</option>
                                            <option value="7">Juillet</option>
                                            <option value="8">Aout</option>
                                            <option value="9">Septembre</option>
                                            <option value="10">Octobre</option>
                                            <option value="11">Novembre</option>
                                            <option value="12">Decembre</option>

                                        </select>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="nav-item dropdown" id="div_annee">
                                        <select class="form-select form-select-lg mb-3" aria-label=".form-select-sm"
                                            id="annee">
                                            <!-- Options for year -->
                                        </select>
                                    </div>
                                    <div class="mx-auto">
                                        <button type="submit"
                                            class="btn btn-primary border-2 border-secondary py-3 px-2 mx-0 rounded-pill text-white h-100"
                                            style="top: 0; right: 0%;">Calculer mon empreinte</button>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </section>
    <!-- page pour les empreintes precedentes End -->

    <!-- Footer Start -->
    <div class="container-fluid copyright bg-dark py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    Groupe12, All right reserved.</span>
                </div>
                <div class="col-md-6 my-auto text-center text-md-end text-white">
                    Designed By Groupe12
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-primary border-3 border-primary rounded-circle back-to-top"><i
            class="fa fa-arrow-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <!-- Inclure Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>